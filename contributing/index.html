<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content=noodp><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css integrity=sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.1/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href=https://improbable-eng.github.io/thanos/main.css><link rel=stylesheet href=https://improbable-eng.github.io/thanos/syntax.css><link rel=icon href=https://improbable-eng.github.io/thanos/icon-light.png><title>Thanos - Highly available Prometheus setup with long term storage capabilities</title><meta property=og:image content=/icon-light.png><meta property=og:type content=object><meta property=og:title content=Thanos><meta property=og:description content="Thanos - Highly available Prometheus setup with long term storage capabilities"></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-purple"><a href=https://improbable-eng.github.io/thanos/ class=navbar-brand><img src=https://improbable-eng.github.io/thanos/icon-dark.png alt="Thanos logo"> Thanos</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://improbable-eng.github.io/thanos/getting-started.md>Documentation</a></li><li class=nav-item><a class=nav-link href=https://github.com/improbable-eng/thanos/releases>Download</a></li><li class=nav-item><a href=https://github.com/improbable-eng/thanos class=nav-link><i class="fab fa-fw fa-github"></i>GitHub</a></li><li class=nav-item><a href=https://twitter.com/ThanosMetrics class=nav-link><i class="fab fa-fw fa-twitter"></i>Twitter</a></li></ul></div></nav><div class=container><div class="row py-3 py-lg-5"><div class="col-12 col-lg-3"><button class="btn btn-block btn-outline-secondary mb-3 d-block d-lg-none" type=button data-toggle=collapse data-target=.docs-menu>
Toggle Menu</button><nav class="docs-menu collapse d-lg-block"><h5>Thanos</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/getting-started.md/>&nbsp;&nbsp;&nbsp;&nbsp;Getting Started</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/changelog/>&nbsp;&nbsp;&nbsp;&nbsp;Changelog</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/design.md/>&nbsp;&nbsp;&nbsp;&nbsp;Design</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/storage.md/>&nbsp;&nbsp;&nbsp;&nbsp;Object Storage</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/service-discovery.md/>&nbsp;&nbsp;&nbsp;&nbsp;Service Discovery</a></div><h5 class=mt-3>Components</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/bucket.md/>&nbsp;&nbsp;&nbsp;&nbsp;Bucket</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/compact.md/>&nbsp;&nbsp;&nbsp;&nbsp;Compact</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/query.md/>&nbsp;&nbsp;&nbsp;&nbsp;Query</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/rule.md/>&nbsp;&nbsp;&nbsp;&nbsp;Rule</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/sidecar.md/>&nbsp;&nbsp;&nbsp;&nbsp;Sidecar</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/store.md/>&nbsp;&nbsp;&nbsp;&nbsp;Store</a></div><h5 class=mt-3>Contributing</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/code_of_conduct/>&nbsp;&nbsp;&nbsp;&nbsp;Code of Conduct</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/how-to-contribute-to-docs.md/>&nbsp;&nbsp;&nbsp;&nbsp;Contribute to docs</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/>&nbsp;&nbsp;&nbsp;&nbsp;Contributing</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/dev.md/>&nbsp;&nbsp;&nbsp;&nbsp;Troubleshooting for dev workflow</a></div><h5 class=mt-3>Proposals</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201809_gossip-removal.md/>&nbsp;&nbsp;&nbsp;&nbsp;Deprecated gossip clustering in favor of File SD</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201807_store_instance_high_availability.md/>&nbsp;&nbsp;&nbsp;&nbsp;High-availability for store instances</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201901-read-write-operations-bucket.md/>&nbsp;&nbsp;&nbsp;&nbsp;Read-Write coordination free operational contract for object storage</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/config.md/>&nbsp;&nbsp;&nbsp;&nbsp;Thanos Cluster Configuration</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201812_thanos-remote-receive.md/>&nbsp;&nbsp;&nbsp;&nbsp;Thanos Remote Write</a></div></nav></div><div class="col-12 col-lg-9"><p>When contributing not obvious change to Thanos repository, please first
discuss the change you wish to make via issue or slack, or any other
method with the owners of this repository before making a change.</p><p>Please follow the <a href=../CODE_OF_CONDUCT.md>code of conduct</a> in all your interactions with the project.</p><h2 id=thanos-philosophy>Thanos Philosophy</h2><p>The philosophy of Thanos and our community is borrowing much from UNIX philosophy and the golang programming language.</p><ul><li>Each sub command should do one thing and do it well<ul><li>eg. thanos query proxies incoming calls to known store API endpoints merging the result</li></ul></li><li>Write components that work together<ul><li>e.g. blocks should be stored in native prometheus format</li></ul></li><li>Make it easy to read, write, and, run components<ul><li>e.g. reduce complexity in system design and implementation</li></ul></li></ul><h2 id=adding-new-features-components>Adding New Features / Components</h2><p>Adding large new features and components to Thanos should be done by first creating a <a href=../docs/proposals>proposal</a> document outlining the design decisions of the change, motivations for the change, and any alternatives that might have been considered.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>It is strongly recommended that you use OSX or popular Linux distributions systems e.g. Ubuntu, Redhat, or OpenSUSE for development.</li></ul><h2 id=pull-request-process>Pull Request Process</h2><ol><li>Read <a href=../docs/getting_started.md>getting started docs</a> and prepare Thanos.</li><li>Familiarize yourself with <a href=../Makefile>Makefile</a> commands like <code>format</code>, <code>build</code>, <code>proto</code> and <code>test</code>.</li><li>Fork improbable-eng/thanos.git and start development from your own fork. Here are sample steps to setup your development environment:
<code>console
$ mkdir -p $GOPATH/src/github.com/improbable-eng
$ cd $GOPATH/src/github.com/improbable-eng
$ git clone https://github.com/&lt;your_github_id&gt;/thanos.git
$ cd thanos
$ git remote add upstream https://github.com/improbable-eng/thanos.git
$ git remote update
$ git merge upstream/master
$ make build
$ ./thanos -h</code></li><li>Keep PRs as small as possible. For each of your PR, you create one branch based on the latest master. Chain them if needed (base PR on other PRs). Here are sample steps you can follow. You can get more details about the workflow from <a href=https://gist.github.com/Chaser324/ce0505fbed06b947d962>here</a>.
<code>console
$ git checkout master
$ git remote update
$ git merge upstream/master
$ git checkout -b &lt;your_branch_for_new_pr&gt;
$ make build
$ &lt;Iterate your development&gt;
$ git push origin &lt;your_branch_for_new_pr&gt;</code></li><li>If you don&rsquo;t have a live object store ready add these envvars to skip tests for these:</li><li>THANOS_SKIP_GCS_TESTS to skip GCS tests.</li><li>THANOS_SKIP_S3_AWS_TESTS to skip AWS tests.</li><li>THANOS_SKIP_AZURE_TESTS to skip Azure tests.</li><li>THANOS_SKIP_SWIFT_TESTS to skip SWIFT tests.</li><li>THANOS_SKIP_TENCENT_COS_TESTS to skip Tencent COS tests.</li></ol><p>If you skip all of these, the store specific tests will be run against memory object storage only.
CI runs GCS and inmem tests only for now. Not having these variables will produce auth errors against GCS, AWS, Azure or COS tests.</p><ol><li>If your change affects users (adds or removes feature) consider adding the item to <a href=../CHANGELOG.md>CHANGELOG</a></li><li>You may merge the Pull Request in once you have the sign-off of at least one developers with write access, or if you
do not have permission to do that, you may request the second reviewer to merge it for you.</li><li>If you feel like your PR waits too long for a review, feel free to ping <a href=https://join.slack.com/t/improbable-eng/shared_invite/enQtMzQ1ODcyMzQ5MjM4LWY5ZWZmNGM2ODc5MmViNmQ3ZTA3ZTY3NzQwOTBlMTkzZmIxZTIxODk0OWU3YjZhNWVlNDU3MDlkZGViZjhkMjc><code>#thanos-dev</code></a> channel on our slack for review!</li></ol><h2 id=dependency-management>Dependency management</h2><p>The Thanos project uses <a href=https://golang.org/cmd/go/#hdr-Modules__module_versions__and_more>Go modules</a> to manage dependencies on external packages. This requires a working Go environment with version 1.11 or greater, git and <a href=http://wiki.bazaar.canonical.com/Download>bzr</a> installed.</p><p>To add or update a new dependency, use the <code>go get</code> command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Pick the latest tagged release.</span>
go get example.com/some/module/pkg

<span class=c1># Pick a specific version.</span>
go get example.com/some/module/pkg@vX.Y.Z</code></pre></div><p>Tidy up the <code>go.mod</code> and <code>go.sum</code> files:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>make go-mod-tidy
git add go.mod go.sum
git commit</code></pre></div><p>You have to commit the changes to <code>go.mod</code> and <code>go.sum</code> before submitting the pull request.</p><hr><p>Found a typo, inconsistency or missing information in our docs?
Help us to improve <a href=https://thanos.io>Thanos</a> documentation by proposing a fix <a href=https://github.com/improbable-eng/thanos/edit/master/CONTRIBUTING.md>on GitHub here</a> ❤️</p></div></div></div><footer class="bg-dark text-light"><div class="container text-center text-md-left"><div class="row py-5"><div class="col-12 col-md-6 col-lg mb-3 mb-lg-0"><img src=https://improbable-eng.github.io/thanos/icon-dark.png alt=Thanos width=45%></div><div class="col-12 col-md-6 col-lg"><h6 class=font-weight-bold>Documentation</h6><ul class=list-unstyled><li><a class=text-reset href=https://improbable-eng.github.io/thanos/getting-started.md>Getting Started</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/design.md>Design</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/storage.md>Storage</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/service-discovery.md>Service Discovery</a></li></ul></div><div class="col-12 col-md-6 col-lg"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://join.slack.com/t/improbable-eng/shared_invite/enQtMzQ1ODcyMzQ5MjM4LWY5ZWZmNGM2ODc5MmViNmQ3ZTA3ZTY3NzQwOTBlMTkzZmIxZTIxODk0OWU3YjZhNWVlNDU3MDlkZGViZjhkMjc class=text-reset><i class="fab fa-fw fa-slack"></i>Slack</a></li><li><a href=https://github.com/improbable-eng/thanos class=text-reset><i class="fab fa-fw fa-github"></i>GitHub</a></li><li><a href=https://twitter.com/ThanosMetrics class=text-reset><i class="fab fa-fw fa-twitter"></i>Twitter</a></li></ul></div><div class="col col-md-6 col-lg"><h6 class=font-weight-bold>About</h6><p>Thanos is an OSS licensed project as Apache License 2.0</p></div></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js integrity=sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-137374921-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>